# Malware Analysis in Reverse Engineering

A specialized project focused on analyzing Android malware applications to understand their functionality, detect suspicious behavior, and identify malicious activities such as keylogging and command & control communications.

## Description

This project provides hands-on experience in malware analysis techniques, specifically targeting Android applications. Students will learn to dissect APK files, identify malicious behavior patterns, and extract critical information such as data exfiltration methods and C2 infrastructure.

## Learning Objectives

By completing this project, you will be able to explain:

### Analysis Environment
- Which tools are permitted for dynamic malware analysis
- Functions of analysis tools (GDB, x64dbg, OllyDbg, Cuckoo Sandbox, Wireshark, ProcMon, Intel Pin, Valgrind, Sysinternals Suite)
- Significance of performing malware analysis in controlled environments
- Necessity of using virtual machines or sandboxes for analysis

### Technical Implementation
- How to configure Kali Linux for analysis tools and scripts
- Steps to ensure script and tool executability on Kali Linux
- Importance of avoiding hardcoded values and using relative paths
- How relative paths improve portability and reliability

### Analysis Methodology
- Methods to validate binary and script integrity before analysis
- Verification techniques for detecting tampering or corruption
- Configuration requirements for monitoring tools
- Setup procedures for accurate data collection with analysis tools

### Documentation and Focus
- Systematic documentation methods for analysis findings
- Formats and tools for organizing and reporting results
- Importance of maintaining focus on target binaries
- Ensuring analysis remains focused without system behavior distractions

### Security Considerations
- Risks of using online tools for malware analysis
- Benefits of mandatory local analysis for control and confidentiality

## Tools and Environment

### Required Platform
- **Operating System**: Kali Linux
- **Environment**: Virtual machine or sandbox (mandatory)
- **Analysis Location**: Local only (no online tools permitted)

### Analysis Tools
- **APK Analysis**: APKTool, JADX, MobSF
- **Debuggers**: GDB, x64dbg, OllyDbg
- **Dynamic Analysis**: Cuckoo Sandbox, Frida
- **Network Monitoring**: Wireshark
- **System Monitoring**: ProcMon, Sysinternals Suite
- **Instrumentation**: Intel Pin, Valgrind
- **Mobile Tools**: Android ADB commands


## Tasks

### 0. Malware Analysis App 0
**Objective**: Analyze `malware_0.apk` to detect keylogging functionality and understand input handling mechanisms.

**Target Application**: `malware_0.apk`

**Analysis Process**:
1. **APK Extraction**: Unpack APK using APKTool, JADX, or MobSF
2. **Source Code Analysis**: Examine decompiled code and resources
3. **Behavior Identification**: Look for suspicious activities including:
   - Data collection mechanisms
   - Permission abuse patterns
   - Hidden functionalities
   - Keylogging capabilities
4. **Input Handling Analysis**: Identify how the app processes user input:
   - Event listeners examination
   - Accessibility services usage
   - Native library interactions
   - Keystroke capture mechanisms
5. **Documentation**: Record identified input-handling techniques

**Deliverable**: Document the specific input-handling technique in `0-solution.txt`

### 1. Malware Analysis App 1
**Objective**: Analyze `malware_1.apk` to identify Command & Control (C2) infrastructure used for data exfiltration.

**Target Application**: `malware_1.apk`

**Analysis Process**:
1. **APK Extraction**: Decompile application using standard tools
2. **Malicious Behavior Analysis**: Identify indicators of compromise:
   - Data theft mechanisms
   - Remote access capabilities
   - Unauthorized network connections
   - Suspicious permissions and API calls
3. **Network Analysis**: Examine network-related functions:
   - HTTP/HTTPS requests
   - Socket connections
   - DNS queries
4. **C2 Infrastructure Identification**: Extract C2 communication details:
   - Hardcoded domains or IP addresses
   - Network request destinations
   - Encrypted communication endpoints
   - Data transmission methods
5. **Documentation**: Record C2 domain information

**Deliverable**: Document the identified C2 domain in `1-solution.txt`

## Analysis Methodology

### Pre-Analysis Setup
1. **Environment Preparation**:
   - Configure isolated VM/sandbox environment
   - Install required analysis tools
   - Set up network monitoring
   - Verify tool functionality

2. **Binary Validation**:
   - Calculate file hashes
   - Verify APK integrity
   - Check for corruption or tampering
   - Document baseline measurements

### Analysis Workflow
1. **Static Analysis**:
   - APK decompilation and examination
   - Manifest file analysis
   - Resource inspection
   - Code pattern identification

2. **Dynamic Analysis**:
   - Runtime behavior observation
   - Network traffic monitoring
   - System interaction tracking
   - Permission usage analysis

3. **Documentation**:
   - Systematic finding recording
   - Evidence preservation
   - Result verification
   - Clear reporting format

## Security Best Practices

### Environment Isolation
- Use dedicated analysis VMs
- Network segmentation from production systems
- Snapshot capabilities for clean state restoration
- No internet access for malware samples

### Data Protection
- Local analysis only (no online tools)
- Encrypted storage for analysis data
- Secure disposal of temporary files
- Confidential handling of findings

### Analysis Integrity
- Verify tool authenticity
- Use relative paths in scripts
- Regular backup of analysis data
- Version control for analysis scripts
